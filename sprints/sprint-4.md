# Sprint 4: Integration & QA

## Overview

| 항목 | 내용 |
|------|------|
| 목표 | End-to-end 테스트 및 버그 수정 |
| 선행 조건 | Sprint 1, 2, 3 완료 |
| 후속 Sprint | Sprint 5 (Deployment) |

---

## Tasks

| ID | Task | 상태 | 우선순위 |
|----|------|------|----------|
| S4-1 | E2E 플로우 테스트 | TODO | P0 |
| S4-2 | Push Notification 테스트 | TODO | P0 |
| S4-3 | 에러 핸들링 검증 | TODO | P0 |
| S4-4 | LLM 응답 품질 검증 | TODO | P0 |
| S4-5 | AI 감지 정확도 확인 | TODO | P1 |
| S4-6 | 성능 테스트 | TODO | P1 |
| S4-7 | UI/UX 리뷰 및 수정 | TODO | P1 |
| S4-8 | 버그 수정 | TODO | P0 |
| S4-9 | 프롬프트 튜닝 | TODO | P1 |
| S4-10 | 문서 정리 | TODO | P2 |

---

## S4-1: E2E Flow Test

### Test Scenarios

#### Happy Path

| Step | Action | Expected Result |
|------|--------|-----------------|
| 1 | 앱 실행 | Splash → Login 화면 |
| 2 | 회원가입 | 성공 → Home 화면 |
| 3 | 새 채점 시작 | Submit 화면 이동 |
| 4 | 답안 입력 (600자) | 글자 수 표시, 버튼 활성화 |
| 5 | 채점 요청 | Submitted 화면, 로딩 표시 |
| 6 | (백엔드 처리 대기) | 15-30초 |
| 7 | Push 알림 수신 | "채점 완료" 알림 |
| 8 | 알림 탭 | Result Detail 화면 이동 |
| 9 | 결과 확인 | 점수, 피드백 표시 |
| 10 | History 확인 | 방금 제출 건 표시 |
| 11 | 로그아웃 | Login 화면 이동 |

#### 백그라운드 시나리오

| Step | Action | Expected Result |
|------|--------|-----------------|
| 1 | 답안 제출 후 앱 백그라운드 | 채점 계속 진행 |
| 2 | 다른 앱 사용 | - |
| 3 | Push 알림 수신 | 알림 표시 |
| 4 | 알림 탭 | 앱 열림 → Result Detail |

#### 오프라인 → 온라인 복구

| Step | Action | Expected Result |
|------|--------|-----------------|
| 1 | 네트워크 끊기 | - |
| 2 | 답안 제출 시도 | 에러 메시지 표시 |
| 3 | 네트워크 연결 | - |
| 4 | 재시도 | 정상 제출 |

---

## S4-2: Push Notification Test

### Test Matrix

| 상태 | iOS | Android |
|------|-----|---------|
| 포그라운드 | ⬜ | ⬜ |
| 백그라운드 | ⬜ | ⬜ |
| 앱 종료 | ⬜ | ⬜ |
| 알림 권한 거부 | ⬜ | ⬜ |
| 알림 탭 → 화면 이동 | ⬜ | ⬜ |

### Test Cases

1. **포그라운드 알림**
   - 앱 사용 중 알림 수신
   - 로컬 알림 또는 인앱 배너 표시
   - 탭 시 Result Detail 이동

2. **백그라운드 알림**
   - 앱 백그라운드 상태에서 시스템 알림 수신
   - 알림 탭 시 앱 활성화 + 화면 이동

3. **앱 종료 상태 알림**
   - 앱 완전 종료 상태에서 알림 수신
   - 알림 탭 시 앱 실행 + 화면 이동

4. **알림 권한 거부**
   - History 탭에서 수동 조회 가능 확인
   - NEW 배지 표시 확인

---

## S4-3: Error Handling Test

### API Errors

| 에러 코드 | 상황 | 예상 동작 |
|----------|------|----------|
| 400 | 유효성 검증 실패 | 인라인 에러 메시지 |
| 401 | 인증 만료 | Login 화면 이동 |
| 404 | 리소스 없음 | "찾을 수 없음" 메시지 |
| 500 | 서버 오류 | "잠시 후 다시 시도" |
| Timeout | 네트워크 지연 | "연결 시간 초과" |
| No Network | 오프라인 | "인터넷 연결 확인" |

### Test Cases

```
1. 잘못된 이메일 형식으로 로그인 시도
   → 유효성 검증 에러 메시지

2. 만료된 토큰으로 API 호출
   → 자동 로그아웃 + Login 화면

3. 빈 답안 제출 시도
   → 제출 버튼 비활성화 상태 유지

4. 800자 초과 입력
   → 입력 제한 또는 경고

5. 서버 다운 상태에서 제출
   → 에러 메시지 + 재시도 버튼

6. 채점 실패 시
   → History에서 "실패" 상태 표시
```

---

## S4-4: LLM Response Quality Test

### Test Essays

| ID | 유형 | 예상 점수대 |
|----|------|------------|
| Q1 | 고득점 모범답안 | 45-50 |
| Q2 | 중간 수준 답안 | 30-40 |
| Q3 | 저점수 답안 (문법 오류 많음) | 15-25 |
| Q4 | 주제 이탈 답안 | 10-20 |
| Q5 | 분량 부족 (300자) | 20-30 |
| Q6 | 구어체 과다 사용 | 25-35 |

### Quality Criteria

- [ ] 점수가 예상 범위 내
- [ ] 항목별 점수 합 = 총점
- [ ] 피드백이 구체적이고 건설적
- [ ] 피드백이 점수와 일관됨
- [ ] 개선 제안 포함
- [ ] 한국어 피드백 문법 정확

### Consistency Test

동일 답안 3회 채점 후:
- 점수 편차 ≤ 5점
- 주요 피드백 내용 일관

---

## S4-5: AI Detection Test

### Test Cases

| 유형 | 예상 결과 |
|------|----------|
| 직접 작성 답안 | AI 의심 없음 |
| ChatGPT 생성 답안 | AI 의심 플래그 |
| Claude 생성 답안 | AI 의심 플래그 |
| 부분 AI 수정 답안 | 중간 점수 |

### Threshold 검증

- AI 감지 점수 0.7 이상 → 플래그
- 플래그 시 UI에 경고 표시 확인

---

## S4-6: Performance Test

### Metrics

| 지표 | 목표 | 측정 방법 |
|------|------|----------|
| API 응답 시간 (제출) | < 500ms | 서버 로그 |
| 채점 완료 시간 | < 30초 | 제출 → 콜백 |
| Push 지연 | < 5초 | 콜백 → 알림 수신 |
| 앱 시작 시간 | < 3초 | Cold start |

### Load Test (선택)

```
동시 사용자: 10명
요청 패턴: 1분에 1건 제출
기대: 모든 요청 30초 내 완료
```

---

## S4-7: UI/UX Review

### Checklist

- [ ] 글자 크기 적절
- [ ] 터치 영역 충분 (44x44pt 이상)
- [ ] 로딩 상태 명확
- [ ] 에러 메시지 이해 가능
- [ ] 색상 대비 충분 (접근성)
- [ ] 키보드 닫기 처리
- [ ] 스크롤 동작 자연스러움
- [ ] 다크 모드 (선택)

### Screen-by-screen Review

| 화면 | 체크 항목 |
|------|----------|
| Login | 키보드 가림 없음, 자동 완성 |
| Submit | 글자수 실시간 업데이트, 키보드 처리 |
| Submitted | 로딩 애니메이션 부드러움 |
| History | 스크롤 성능, 당겨서 새로고침 |
| Result | 점수 시각화 가독성, 스크롤 |

---

## S4-8: Bug Tracking

### Bug Template

```markdown
## Bug: [제목]

**재현 단계**:
1. ...
2. ...
3. ...

**예상 동작**: ...
**실제 동작**: ...

**환경**:
- 기기:
- OS 버전:
- 앱 버전:

**스크린샷/로그**:
```

### Priority Levels

| Level | 기준 | 대응 |
|-------|------|------|
| P0 | 핵심 플로우 차단 | 즉시 수정 |
| P1 | 주요 기능 문제 | Sprint 내 수정 |
| P2 | 마이너 이슈 | 백로그 |

---

## S4-9: Prompt Tuning

### 개선 영역

1. **점수 일관성**
   - Few-shot 예시 점수 조정
   - 채점 기준 설명 구체화

2. **피드백 품질**
   - 더 구체적인 예시 요청
   - 개선 방향 명시 강화

3. **응답 형식**
   - JSON 파싱 실패 방지
   - 필드 누락 방지

### 튜닝 프로세스

```
1. 문제 사례 수집
2. 프롬프트 수정
3. 테스트 에세이로 검증
4. 개선 확인 후 배포
```

---

## S4-10: Documentation

### 산출물

| 문서 | 내용 |
|------|------|
| API 문서 | 엔드포인트, 요청/응답 스키마 |
| 배포 가이드 | AWS 배포 절차 |
| 앱 빌드 가이드 | iOS/Android 빌드 절차 |
| 운영 가이드 | 모니터링, 트러블슈팅 |

---

## QA Checklist Summary

### Core Flow
- [ ] 회원가입 → 로그인 → 로그아웃
- [ ] 답안 제출 → 결과 수신 (Push)
- [ ] 답안 제출 → 결과 수신 (수동 조회)
- [ ] 채점 기록 조회 및 상세 확인

### Features
- [ ] AI 생성 글 제출 시 경고 표시
- [ ] 앱 백그라운드 상태에서 Push 수신
- [ ] 알림 탭 → 결과 화면 이동
- [ ] 오프라인 → 온라인 복구

### Validation
- [ ] 100자 미만 입력 제한
- [ ] 800자 초과 입력 제한
- [ ] 이메일 형식 검증
- [ ] 비밀번호 최소 길이 검증

### Error Handling
- [ ] 네트워크 오류 메시지
- [ ] 서버 오류 메시지
- [ ] 인증 만료 처리

---

## Completion Criteria

- [ ] 모든 E2E 시나리오 통과
- [ ] Push 테스트 매트릭스 완료
- [ ] P0/P1 버그 모두 수정
- [ ] LLM 응답 품질 기준 충족
- [ ] 성능 목표 달성
- [ ] UI/UX 리뷰 완료
- [ ] 문서 작성 완료

---

*Sprint 4 완료 후 Sprint 5 (Deployment) 진행*
